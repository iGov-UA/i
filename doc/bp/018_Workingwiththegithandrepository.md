**[18.0 Установка Eclipce](https://github.com/e-government-ua/iBP/wiki/%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0-Eclipce)**   
**[18.1 Ветки](https://github.com/e-government-ua/iBP/wiki/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0-%D1%81-%D0%B3%D0%B8%D1%82%D0%BE%D0%BC-%D0%B8-%D1%80%D0%B5%D0%BF%D0%BE%D0%B7%D0%B8%D1%82%D0%BE%D1%80%D0%B8%D0%B5%D0%BC#%D0%92%D0%B5%D1%82%D0%BA%D0%B8)**  
**[18.2 Переключение между ветками](https://github.com/e-government-ua/iBP/wiki/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0-%D1%81-%D0%B3%D0%B8%D1%82%D0%BE%D0%BC-%D0%B8-%D1%80%D0%B5%D0%BF%D0%BE%D0%B7%D0%B8%D1%82%D0%BE%D1%80%D0%B8%D0%B5%D0%BC#%D0%9F%D0%B5%D1%80%D0%B5%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5-%D0%BC%D0%B5%D0%B6%D0%B4%D1%83-%D0%B2%D0%B5%D1%82%D0%BA%D0%B0%D0%BC%D0%B8)**  
**[18.3 Мерж](https://github.com/e-government-ua/iBP/wiki/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0-%D1%81-%D0%B3%D0%B8%D1%82%D0%BE%D0%BC-%D0%B8-%D1%80%D0%B5%D0%BF%D0%BE%D0%B7%D0%B8%D1%82%D0%BE%D1%80%D0%B8%D0%B5%D0%BC#%D0%9C%D0%B5%D1%80%D0%B6)**  
**[18.4 Разрешение конфликтов при мерже (в Eclipse)](https://github.com/e-government-ua/iBP/wiki/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0-%D1%81-%D0%B3%D0%B8%D1%82%D0%BE%D0%BC-%D0%B8-%D1%80%D0%B5%D0%BF%D0%BE%D0%B7%D0%B8%D1%82%D0%BE%D1%80%D0%B8%D0%B5%D0%BC#%D0%A0%D0%B0%D0%B7%D1%80%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D0%B5-%D0%BA%D0%BE%D0%BD%D1%84%D0%BB%D0%B8%D0%BA%D1%82%D0%BE%D0%B2-%D0%BF%D1%80%D0%B8-%D0%BC%D0%B5%D1%80%D0%B6%D0%B5-%D0%B2-eclipse)**  
**[18.5 Выкладка версии](https://github.com/e-government-ua/iBP/wiki/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0-%D1%81-%D0%B3%D0%B8%D1%82%D0%BE%D0%BC-%D0%B8-%D1%80%D0%B5%D0%BF%D0%BE%D0%B7%D0%B8%D1%82%D0%BE%D1%80%D0%B8%D0%B5%D0%BC#%D0%92%D1%8B%D0%BA%D0%BB%D0%B0%D0%B4%D0%BA%D0%B0-%D0%B2%D0%B5%D1%80%D1%81%D0%B8%D0%B8)**  
**[18.6 Как накатить ветку одну ветку на другую (в NetBeans)](https://github.com/e-government-ua/iBP/wiki/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0-%D1%81-%D0%B3%D0%B8%D1%82%D0%BE%D0%BC-%D0%B8-%D1%80%D0%B5%D0%BF%D0%BE%D0%B7%D0%B8%D1%82%D0%BE%D1%80%D0%B8%D0%B5%D0%BC#%D0%9A%D0%B0%D0%BA-%D0%BD%D0%B0%D0%BA%D0%B0%D1%82%D0%B8%D1%82%D1%8C-%D0%B2%D0%B5%D1%82%D0%BA%D1%83-%D0%BE%D0%B4%D0%BD%D1%83-%D0%B2%D0%B5%D1%82%D0%BA%D1%83-%D0%BD%D0%B0-%D0%B4%D1%80%D1%83%D0%B3%D1%83%D1%8E-%D0%B2-netbeans)**  
**[18.7 Откат изменений (в Eclipse)](https://github.com/e-government-ua/iBP/wiki/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0-%D1%81-%D0%B3%D0%B8%D1%82%D0%BE%D0%BC-%D0%B8-%D1%80%D0%B5%D0%BF%D0%BE%D0%B7%D0%B8%D1%82%D0%BE%D1%80%D0%B8%D0%B5%D0%BC#%D0%9E%D1%82%D0%BA%D0%B0%D1%82-%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D0%B9-%D0%B2-eclipse)**  

# Ветки
Очень упрощенная схема веток, с которыми работают бизнес-аналитики приведена на рисунке:  
![3](https://drive.google.com/uc?export=download&id=0B42BBpUHJK_sTU1vOU12R2tLc0k)  
Основная разработка и тестирование бизнес-процессов происходит в ветке test-delta.
Как установить и зятнуть себе локально репозиторий описано [здесь](https://github.com/e-government-ua/i/wiki/%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0-ActivitiDesigner,-%D0%B4%D0%BB%D1%8F-%D1%80%D0%B5%D0%B4%D0%B0%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F-%D0%B1%D0%B8%D0%B7%D0%BD%D0%B5%D1%81-%D0%BF%D1%80%D0%BE%D1%86%D0%B5%D1%81%D1%81%D0%BE%D0%B2). 
Програмисты ведут свою разработку в ветке test.  
Когда появляется необходимость синхронизировать доработки программистов и бизнес-процессы - это осуществляется мержем через ветку test-version.
# Переключение между ветками
Правой кнопкой мыши на ветке: **Team-Swith To-New Branch**  
![2](https://drive.google.com/uc?export=download&id=0B42BBpUHJK_sRlZCdHZLb2ZEV1E)  
Select  
выбрать ветку на которую хотите переключиться  
сделать pull  
# Мерж
1. Необходимо находится в ветке **в которую** будет осуществляться мерж  
![2](https://drive.google.com/uc?export=download&id=0B42BBpUHJK_sdFM5VnJpb01yZkE)  
1. сделать Pull  
1. нажать правой кнопкой на проекте и выбрать **team**, затем **merge**  
![4](https://drive.google.com/uc?export=download&id=0B42BBpUHJK_seldVN1hxaW9DU1E)  
1. выбрать ветку **из которой** будем мержить и нажимаем "Merge"  
![3](https://drive.google.com/uc?export=download&id=0B42BBpUHJK_sVUFnWXliUk5aeTQ)  
1. При мерже могут возникнуть конфликты в файлах, которые необходимо разрешить. Конфликты обозначены красным ромбиком.  
![2](https://drive.google.com/uc?export=download&id=0B42BBpUHJK_scmhKTTNmUDRQN0k)

# Разрешение конфликтов при мерже (в eclipse)
нажимаем правой кнопкой на конфликтном файле: **team-merge tool**  
выбираем отображение панелей (нажимайте "ок")  
на экране будут показаны 2 варианта файла с разных веток, которые конфликтуют между собой. Необходимо принять решение версию какого файла считать актуальной.
Если производится мерж альфы и дельты, то по все файлам из папки autodeploy отдавать предпочтение ветке delta (принимать как более актулаьные файлы с ветки delta).
Если более актуальная версия файла ветки из которой производится мерж - необходимо добавить эти изменения нажав на квадратик между версиями  
![3](https://drive.google.com/uc?export=download&id=0B42BBpUHJK_sMlRxbU40T2pIQ1k)  

**Обратите внимание!** Это очень неудобная фишка в eclipse - строки добавляются, а не заменяются.  
Поэтому дубли нужно удалить вручную. И затем сохранить файл.  

Если более актуальная версия файла ветки в которую производится мерж - ничего не делаем, закрываем файл.  
В случае если Вы принимали изменения или не принимали их (оставили файл как есть) - в любом из этих случаев необходимо присвоить индекс версии.  
Правой кнопкой мыши нажимаем на конфликтном файле и выбираем **team-Add to index**  
Красный ромбик пропадет, появляется звездочка.  

Разрешение конфликтов необходимо сделать на каждом файле отдельно.  
После присвоения индексов каждом конфликтному файлу необходимо собрать проект локально.
Если локальная сборка прошла успешно - закомитить и вытолкнуть все изменения. **Commit-Pull-Push**

# Выкладка версии
Перед переброской файлов желательно сделать бекап текущей ветки мастер, чтобы откатывать было легче  
![3](https://drive.google.com/uc?export=download&id=0B42BBpUHJK_sMHRrOGVjSkhuM0E)  
Файлы копируются из дельты в отдельную папку (папки), потом переключаемся в ветку мастер, делаем бекап и просто через ctrl+c, ctrl+v копируем файлы и папки, при предложении заменить - соглашаемся.  
При переносе версии аналитиков из дельты в мастер переносятся следующие файлы и папки:  
### wf-base  
копируем из корня, перебрасываем в корень и в папку prod  
```
wf-base\src\main\resources\patterns\dictionary
wf-base\src\main\resources\data\SubjectOrganDepartment.csv 
wf-base\src\main\resources\data\Flow_ServiceData.csv
wf-base\src\main\resources\data\FlowLink.csv
wf-base\src\main\resources\data\FlowProperty.csv
```
копируем из папки prod и перебрасываем только в папку prod
```
wf-base\src\main\resources\data\prod\EscalationRule.csv
```
### wf-central
папка wf-central\src\main\resources\patterns   
копируем из корня, перебрасываем в корень и в папку prod  
```
wf-central\src\main\resources\data\SubjectOrganJoin.csv
```
копируем из корня и перебрасываем только в корень
```
wf-central\src\main\resources\data\City.csv
wf-central\src\main\resources\data\Merchant.csv
wf-central\src\main\resources\data\Place.csv
wf-central\src\main\resources\data\Service.csv
wf-central\src\main\resources\data\ServiceData.csv
wf-central\src\main\resources\data\ServiceTag.csv
wf-central\src\main\resources\data\ServiceTagLink.csv
wf-central\src\main\resources\data\Subject.csv
wf-central\src\main\resources\data\SubjectOrgan.csv
wf-central\src\main\resources\data\SubjectOrganJoinAttribute.csv
```
### wf-region
```
wf-region\src\main\resources\bpmn\markers
wf-region\src\main\resources\bpmn\autodeploy
wf-region\src\main\resources\pattern\print
```
По умолчанию деплоим оба бека и рестартовать фронт централа (новые города, изменения бпмн по услугам и т.п.)  
После всех проверок на боевом делаем обратный мерж.  
Путь обратного мержа на данный момент master - delta - alpha.  
При конфликтах в наших файлах дельте принимаем дельту (если не договорено иное), в альфе - альфу.  
По файлам программистов или спрашиваем Вову или принимаем мастер для дельты и альфу для альфы.  

# Как накатить ветку одну ветку на другую (в NetBeans)
1. По сути это процесс копирования файлов из одной ветки и замена в другой.  
IDE NetBeans позволяет автоматизировать этот процесс.  
2. Выбираем нужную ветку, то есть ту куда надо внести изменения.  
В вкладке Файлы кликаем по проекту ПКМ и в контекстном меню выбираем   
**git -> получение -> получение файлов**  
![3](https://drive.google.com/uc?export=download&id=0B42BBpUHJK_seThOSFp2bHlhTjA)  
3. Появляется окно, в нем ставим галку в поле **Обновить элементы индекса по выбранной редакции**:  и кликаем кнопку выбрать, где выбираем ветку с которой будем брать необходимые обновления  
![3](https://drive.google.com/uc?export=download&id=0B42BBpUHJK_sakQ4MlowWkhtZ1U)  
4. В выбранную ветку скопируется все файлы с другой ветки, и те файлы которые были изменены (имели отличие) разукрасятся в разные цвета.  
5. Необходимо откатить изменения которые мы не хотим добавлять, для этого в вкладе Файлы выделяем файлы(можно папками) для того чтоб откатить.  
**ПКМ -> Git -> Откатить изменения.**  
![3](https://drive.google.com/uc?export=download&id=0B42BBpUHJK_sdFZUa05JdWZyblE)  
6. Ставим галку **Также удалять новые файлы и папки** и кликаем по **Откатить**  
![3](https://drive.google.com/uc?export=download&id=0B42BBpUHJK_sazNwQm9DTUxqWjg)  
5 и 6 шаг  повторяем для всех файлов которые нам не нужно обновлять.  
7. Собираем локально  
8. Фиксим изменения  
9. Выталкиваем  

# Откат изменений (в eclipse)
